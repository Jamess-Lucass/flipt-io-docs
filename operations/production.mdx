---
title: Flipt In Production
description: This document describes recommended configuration options for operating Flipt in Production.
---

There will eventually come a time where you are ready to use Flipt in a production setting against real users, after having used it in lower testing environments. Naturally, production environments tend to have higher traffic rates than lower environments which in turn, _could_ impact Flipt instance(s).

Here are some configuration options and tips to consider when operating Flipt in production:

1. **Database connection limits**

By default the Golang `database/sql` client, will have `MaxOpenConn` equal to 0 (unlimited), and `MaxIdleConn` equal to 2.

With the databases that listen over a network (MySQL, Postgres, CockroachDB), there are default server limits for the number of open connections it supports.

In high burst traffic scenarios, this can lead to the `too many open connections` error server side.

You should tweak that number to be above 0, and to whatever fits your use case. This can be done via environment variable:

```bash
FLIPT_DATABASE_MAX_OPEN_CONN=5
```

or in a configuration file:

```yaml
database:
  max_open_conn: 5
```

The Golang doc states:

```
If MaxOpenConns is greater than 0 but less than the new MaxIdleConns, then the new MaxIdleConns will be reduced to match the MaxOpenConns limit.
```

So you should keep in mind that tuning `MaxOpenConn` might warrant tuning `MaxIdleConn` as well.

You can do this via environment variable:

```bash
FLIPT_DATABASE_MAX_IDLE_CONN=5
```

or in a configuration file:

```yaml
database:
  max_idle_conn: 5
```

2. **Prepared statements**

By default, all queries are ran as prepared statements. This could be a problem if you are operate some proxies to your database.

For instance, with PGBouncer as a proxy to a Postgres database, it doesn't support prepared statements in its [transaction pooling mode](https://www.pgbouncer.org/faq.html#how-to-use-prepared-statements-with-transaction-pooling).

You can disable prepared statements for the database client via environment variable:

```bash
FLIPT_DATABASE_PREPARED_STATEMENTS_ENABLED=false
```

or in a configuration file:

```yaml
database:
  prepared_statements_enabled: false
```

3. **Debug logging**

Debug logging can be very useful if you are actively developing or trying to fix problems in an environment, but have the adverse effect of eating up CPU time under load, and potentially clouding up useful logs from non-useful ones.

You can disable debug logging by increasing the log level via environment variable:

```bash
FLIPT_LOG_LEVEL=info
```

or in a configuration file:

```yaml
log:
  level: info
```
